---
import Layout from "@layouts/Layout.astro";
import InnerHero from "@components/sections/InnerHero.astro";
import { getCollection } from "astro:content";

const albums = await getCollection("albums");

const heroContent = {
  title: "Gallery",
  description: "",
};
---

<Layout>
  <InnerHero content={heroContent} />

  <section class="site-container px-4 pt-4 pb-base">
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
      {albums.map((album) => {
        const slug = album.slug ?? album.id;
        const cover = album.data.cover ?? "cover.jpg";
        const coverPath = `/src/content/albums/${slug}/${cover}`;

        return (
          <a
            href={`/gallery/${slug}`}
            class="group block rounded-xl overflow-hidden shadow-md hover:shadow-xl hover:-translate-y-1 transition-all duration-300"
          >
            <!-- IMAGE -->
            <div class="relative w-full h-[200px] overflow-hidden rounded-t-xl">
              <img
                src={coverPath}
                alt={album.data.title}
                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
              />

              <!-- Hover overlay -->
              <div class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            </div>

            <!-- TEXT -->
            <div class="p-5 bg-[var(--color-background-light)] border border-[var(--color-background-dark)] rounded-b-xl">
              <h3 class="text-h4 font-semibold text-headline transition-colors duration-300 group-hover:text-[var(--color-primary)]">
                {album.data.title}
              </h3>

              {album.data.description && (
                <p class="mt-2 text-small text-body-base">{album.data.description}</p>
              )}
            </div>
          </a>
        );
      })}
    </div>
  </section>
</Layout>
